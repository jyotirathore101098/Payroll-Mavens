{"ast":null,"code":"var _jsxFileName = \"/Users/jyotirathore101098/Documents/Payroll_Mavens/frontend/src/pages/auth/AuthPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login, register } from \"./authService\";\nimport AuthForm from \"./AuthForm\";\nimport \"./AuthPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthPage = () => {\n  _s();\n  const [isLogin, setIsLogin] = useState(true);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"Employee\"\n  });\n  const navigate = useNavigate();\n  const handleChange = e => setFormData({\n    ...formData,\n    [e.target.name]: e.target.value\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (isLogin) {\n        var _data$user, _data$user2, _data$user3;\n        const data = await login(formData.email, formData.password);\n        localStorage.setItem(\"token\", data.token);\n        // Store only UserID, Name, and Role\n        const userInfo = {\n          UserID: (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user.UserID,\n          Name: (_data$user2 = data.user) === null || _data$user2 === void 0 ? void 0 : _data$user2.Name,\n          Role: (_data$user3 = data.user) === null || _data$user3 === void 0 ? void 0 : _data$user3.Role\n        };\n        localStorage.setItem(\"user\", JSON.stringify(userInfo));\n        alert(`Login successful. Welcome ${userInfo.Name || \"User\"}`);\n        navigate(\"/payroll\");\n      } else {\n        await register(formData);\n        alert(\"Registration successful. You can now login.\");\n        setIsLogin(true);\n      }\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2;\n      let errorMsg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || JSON.stringify((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message || \"Something went wrong\";\n      alert(\"Error: \" + errorMsg);\n      console.error(\"Auth error:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"auth-logo\",\n      children: \"Payroll Maven\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"auth-title\",\n      children: isLogin ? \"Login\" : \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AuthForm, {\n      isLogin: isLogin,\n      formData: formData,\n      onChange: handleChange,\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-footer\",\n      children: [isLogin ? \"Don't have an account?\" : \"Already have an account?\", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setIsLogin(!isLogin),\n        className: \"auth-switch\",\n        children: isLogin ? \"Register\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthPage, \"Nt9M3Pz6zu+tvF5NOCqRq2CMAZM=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthPage;\nexport default AuthPage;\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["React","useState","useNavigate","login","register","AuthForm","jsxDEV","_jsxDEV","AuthPage","_s","isLogin","setIsLogin","formData","setFormData","name","email","password","role","navigate","handleChange","e","target","value","handleSubmit","preventDefault","_data$user","_data$user2","_data$user3","data","localStorage","setItem","token","userInfo","UserID","user","Name","Role","JSON","stringify","alert","err","_err$response","_err$response$data","_err$response2","errorMsg","response","message","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","onSubmit","type","onClick","_c","$RefreshReg$"],"sources":["/Users/jyotirathore101098/Documents/Payroll_Mavens/frontend/src/pages/auth/AuthPage.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login, register } from \"./authService\";\nimport AuthForm from \"./AuthForm\";\nimport \"./AuthPage.css\";\n\nconst AuthPage = () => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"Employee\",\n  });\n\n  const navigate = useNavigate();\n\n  const handleChange = (e) =>\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (isLogin) {\n        const data = await login(formData.email, formData.password);\n        localStorage.setItem(\"token\", data.token);\n        // Store only UserID, Name, and Role\n        const userInfo = {\n          UserID: data.user?.UserID,\n          Name: data.user?.Name,\n          Role: data.user?.Role\n        };\n        localStorage.setItem(\"user\", JSON.stringify(userInfo));\n        alert(`Login successful. Welcome ${userInfo.Name || \"User\"}`);\n        navigate(\"/payroll\");\n      } else {\n        await register(formData);\n        alert(\"Registration successful. You can now login.\");\n        setIsLogin(true);\n      }\n    } catch (err) {\n      let errorMsg =\n        err.response?.data?.message ||\n        JSON.stringify(err.response?.data) ||\n        err.message ||\n        \"Something went wrong\";\n      alert(\"Error: \" + errorMsg);\n      console.error(\"Auth error:\", err);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h1 className=\"auth-logo\">Payroll Maven</h1>\n      <h2 className=\"auth-title\">{isLogin ? \"Login\" : \"Register\"}</h2>\n\n      <AuthForm\n        isLogin={isLogin}\n        formData={formData}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n\n      <div className=\"auth-footer\">\n        {isLogin ? \"Don't have an account?\" : \"Already have an account?\"}{\" \"}\n        <button\n          type=\"button\"\n          onClick={() => setIsLogin(!isLogin)}\n          className=\"auth-switch\"\n        >\n          {isLogin ? \"Register\" : \"Login\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}